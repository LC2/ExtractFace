<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<!--
# Copyright (C) 2015-2016  Alain Rioux (le-tools.com)
#
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->
<head>
<title>ExtractFace Documentation</title>
<link rel="stylesheet" type="text/css" href="../Style.css">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>

<table border=0 cellspacing=0cellpadding=0>
<tr>
<td width="80px" align="center" rowspan=2><img src="ExtractFace48.png" alt="Logo" width="48" height="48" border="0"></td>
<td align="left" valign="center" style="color:#000066; font-size: 100%; font-weight: bold;">ExtractFace<br>Copyright (c) 2015-2016 Alain Rioux<br></td></tr>
<tr><td align="left" style="color:#000066; font-size: 90%;">See <a href="./ExtractFace.html#Credits">Credits</a> about the logo</td></tr>
</table><br>

<hr>

<h1><a name="DontForget">Documentation</a></h1>
<ul>
<li><a href="#UsingExtractFace">Using ExtractFace</a></li>
<li><a href="#ScrollExpand">Scroll and Expand</a></li>
<li><a href="#DumpAlbums">Dump Albums</a></li>
<li><a href="#DumpFriends">Dump Friends</a></li>
<li><a href="#DumpEventMembers">Dump Event Members</a></li>
<li><a href="#DumpContributors">Dump Contributors</a></li>
<li><a href="#ChatFunctions">Chat Functions</a></li>
<li><a href="#Settings">Settings</a></li>
</ul>

<h2 style="margin-top:1.5em;"><a name="UsingExtractFace">Using ExtractFace</a></h2>
<ol>
<li>Start Mozilla Firefox;</li>
<li>Start MozRepl addon if you didn't set the <strong>Activate on startup</strong> option;</li>
<ul>
<li>When using ExtractFace, be sure that MozRepl is started.</li>
<li>You can check the <strong>Activate on startup</strong> option so 
it will start automatically when you use Firefox.</li>
<li>MozRepl is listening for connections on the default port 4242. 
Be sure that you don't have a firewall that blocks the connection.</li>
</ul>
<li>Login to your profile;</li>
<li>Go to your target profile;</li>
<li>Right-click on ExtractFace taskbar icon to popup the menu.</li>
</ol>
<img src="ExtractFace_menu.png" alt="Menu" width="217" height="368" border="0">

<div style="margin: 0 0 0 0;"><a href="#DontForget">Top of the page</a></div>
<h2 style="margin-top:1.5em;"><a name="ScrollExpand">Scroll and Expand</a></h2>
<p>Facebook, like many other websites, use Javascript/Ajax to display content to 
the user. The page is the same but the content change as user click on things or 
do something. Often, to be able to see the whole page, you have to scroll and 
click lot of things which could be very time consuming if you want it all.</p>
<p>To automate that process, ExtractFace provides the <strong>Scroll</strong> and 
the <strong>Expand</strong> function. Both would work on many pages of a Facebook 
profile as the <strong>Timeline</strong> page or a page with photo and comments. 
Here are some more explanations about these functions:</p>
<ul>
<li><strong>Scroll:</strong> This function will scroll down the page until the end 
or after a maximum of repetitions that you select in the <a href="#Settings">Settings</a> 
window.</li>
<li><strong>Expand:</strong> This function will click on <strong>See more</strong> 
and other similar links. The <strong>Expand</strong> function can be customized. 
See <a href="#Settings">Settings</a> for details.</li>
<li><strong>Scroll and Expand:</strong> This function alternates between 
the <strong>Scroll</strong> and the <strong>Expand</strong> function so 
it scrolls one time, expands, scrolls again, expands, and so on... If 
you set a maximum of repetition for the <strong>Scroll</strong>, it will 
apply for this one also.</li>
</ul>
<p>These functions don't check if you are on the right page. So you have to 
choose it manually. To use these function on a page with photo and 
comments, you must open the page in normal view, not a popup window. 
To do this:</p>
<ul>
<li>Right click on the photo and select <strong>Open Link in New Tab</strong></li>
<li>In the new tab, close the popup</li>
</ul>

<div style="margin: 0 0 0 0;"><a href="#DontForget">Top of the page</a></div>
<h2 style="margin-top:1.5em;"><a name="DumpAlbums">Dump Albums</a></h2>
<p>This function can be use to gather all (or selected) albums of photos. 
To be able to use it, you must be anywhere in the target profile.</p>
<img src="DumpAlbumsWindow.png" alt="DumpAlbumsWindow" width="790" height="365" border="0">
<p>When you select this function, ExtractFace:</p>
<ol>
<li>Displays the <strong>Dump albums</strong> window (shown above)</li>
<li>Checks if you are already in the <strong>photos_albums</strong> page</li>
<li>If not, goes to the right page</li>
<li>Gathers the profile's name to propose as filename</li>
<li>Shows available albums</li>
</ol>
<p>Like other "Dump" function, you have to select a directory where albums 
and photos will be saved. Options are:</p>
<ul>
<li><strong>Include publication date:</strong> If you select this option, 
ExtractFace will gather the date that the photo or video has been published. 
Because ExtractFace has to open each page to get that information, using 
this option will take more time.</li>
<li><strong>Open output HTML file:</strong> At the end of the process, the HTML 
album page will be opened in your default browser.</li>
<li><strong>Open album folder:</strong> At the end of the process, the folder 
where the album have been saved will be opened in Window Explorer.</li>
</ul>
<p>When ready, you can click on <strong>Dump</strong> to start the process. 
ExtractFace will create a directory for each album selected and download all 
the images from that album. At the end of the process, ExtractFace will open 
the album page created with all albums and photos/videos.</p>

<div style="margin: 0 0 0 0;"><a href="#DontForget">Top of the page</a></div>
<h2 style="margin-top:1.5em;"><a name="DumpFriends">Dump Friends</a></h2>
<p>This function can be use to gather all friend lists (or selected) of a 
profile. It produces a XLSX file that contains details of profile's friends. 
To be able to use it, you must be anywhere in the target profile.</p>
<img src="DumpFriendsWindow.png" alt="DumpFriendsWindow" width="755" height="355" border="0">
<p>When you select this function, ExtractFace:</p>
<ol>
<li>Displays the <strong>Dump friends</strong> window (shown above)</li>
<li>Checks if you are already in the <strong>friends</strong> page</li>
<li>If not, goes to the right page</li>
<li>Gathers the profile's name to propose as filename</li>
<li>Shows available friend list categories</li>
</ol>
<p>You have to select a directory where the output XLSX file will be saved. 
Other options are:</p>
<ul>
<li><strong>Include profile icons:</strong> Image of profiles are included 
in the spreadsheet.</li>
<li><strong>Open output XLSX file:</strong> Open the report at the end of the 
process.</li>
<li><strong>Use safe mode:</strong> By default, ExtractFace connect to Firefox 
to parse the page. If it's faster, it's also unstable and causes many crashes. 
With huge friend page (few thousands and more), it may cause a fatal crash 
("out of memory!"). With this option, ExtractFace uses a different parsing 
method that don't cause crash, but it's running much more slowly.</li>
</ul>
<p>When ready, you can click on <strong>Dump</strong> to start the process. 
The report will look like this:</p>
<img src="DumpFriendsSample.png" alt="DumpFriendsSample" width="885" height="444" border="0">
<br><br>

<div style="margin: 0 0 0 0;"><a href="#DontForget">Top of the page</a></div>
<h2 style="margin-top:1.5em;"><a name="DumpEventMembers">Dump Event Members</a></h2>
<p>This function can be use to gather the guest lists associated to an 
event. It produces a XLSX file that contains some details on the 
event members. To be able to use it, you must be in the main page of 
the event.</p>
<img src="DumpEventsWindow.png" alt="DumpEventsWindow" width="755" height="390" border="0">
<p>When you select this function, ExtractFace:</p>
<ol>
<li>Displays the <strong>Dump event members</strong> window (shown above)</li>
<li>Checks if you are in the <strong>events</strong> page</li>
<li>If not, displays an error message</li>
<li>If yes, gathers details about the event like the event ID, the profile 
ID of the author and the data URL. It also gathers details about the 
guest lists. There are four guest lists for each event:</li>
<ul>
<li><strong>Going</strong> (or <strong>went</strong>);</li>
<li><strong>Maybe</strong>;</li>
<li><strong>Invited</strong>;</li>
<li><strong>Declined</strong> (<strong>Can't Go</strong>);</li>
</ul>
<li>Proposes a name for the XLSX file.</li>
</ol>
<p>You have to select a directory where the XLSX file will be saved. 
You may also select the <strong>Include profile icons</strong> option to get every 
images associated with the profiles of the event members (much more slowly).</p>
<p>When ready, you can click on <strong>Dump</strong> to start the process. When you 
press <strong>Dump</strong>, ExtractFace:</p>
<ol>
<li>Gets the first data set which contains the four guest list members 
(max. 500 members for each list).</li>
<li>Parses the data to gathers event member details.</li>
<li>If you select the <strong>Include profile icons</strong> option:</li>
<ul>
<li>Downloads profile icons: Unlike other functions of ExtractFace, 
profiles icons are not included in the downloaded data, so they have to 
be downloaded separately. That's why it took much more time. During the 
process, ExtractFace may crash a few times. This is normal, but it may 
result corrupted image files. So at the end, ExtractFace will check 
integrity of every image files and replace corrupted ones (download it 
again).</li>
</ul>
<li>Creates the XLSX file, with a spreadsheet for each guest list.</li>
</ol>
<p>At the end of the process, ExtractFace display the XLSX file if 
the option <strong>Open output XLSX file</strong> is checked. 
Report will look like the one produced by <a href="#DumpFriends">Dump 
Friends</a>.</p>
<p><strong style="text-decoration: underline;">Important:</strong> For 
each guest list, you will get a maximum of 500 members. If you think not 
all event members have been gathered (yes it may happen!), you can restart 
the process, but don't delete old files. Some will be replaced, but profile 
icons already downloaded will not be downloaded again, so it's gonna be 
faster.</p>

<div style="margin: 0 0 0 0;"><a href="#DontForget">Top of the page</a></div>
<h2 style="margin-top:1.5em;"><a name="DumpContributors">Dump Contributors</a></h2>
<p>This function can be used to list all persons that contribute to a particular 
page. Like <a href="ScrollExpand">Scroll and Expand</a> functions, this one can 
be used one any page that contains comments and/or Likes. Prior to use this function, 
you have to choose the page and use the <a href="ScrollExpand">Scroll and Expand</a> 
function if necessary.</p>
<img src="DumpContribWindow.png" alt="DumpContribWindow" width="660" height="305" border="0">
<p>Available options are the same that are used in some other functions 
like <strong>Include profile icons</strong> and <strong>Open output XLSX 
file</strong>.</p>
<p>This function produces a XLSX file like <a href="#DumpFriends">Dump 
Friends</a> and <a href="DumpEventMembers">Dump Event Members</a>, but 
there is an additional column, that contains the number of times a 
contributors is found. Types of contributors supported are:</p>
<ul>
<li><strong>Comments:</strong> All person that post a comment on the page. 
It includes replies. As comments are all on the main page, this one is the 
fastest.</li>
<li><strong>Likes:</strong> Any types of Likes. This one should be the 
slowest, because ExtractFace has to open a page for every group of Likes.</li>
<li><strong>Visitor Posts:</strong> You can find Visitors Posts on the left-hand 
side of some profile. When you select this type, a popup will appear and will 
be automatically scrolled.</li>
</ul>

<div style="margin: 0 0 0 0;"><a href="#DontForget">Top of the page</a></div>
<h2 style="margin-top:1.5em;"><a name="ChatFunctions">Chat Functions</a></h2>
<p>ExtractFace provides some functions to help you extract conversations 
from your Facebook profile. To be able to use these function, you must 
select <strong>See All</strong> from the chat menu, then select any of the 
conversation on the left side. In the address bar of your browser, you 
should have an address like "https://www.facebook.com/messages/[id of the 
other person].</p>
<img src="ExtractFace_menu_DumpChatFunctions.png" alt="Menu" width="217" height="368" border="0">
<p>The <strong>Scroll Chat</strong> function will scroll until it reaches the 
beginning of the conversation. If you only want a part of the conversation, 
you can do a search by using the <strong>Search messages in the conversation</strong> 
function provided by Facebook. When you find the message, you can use <strong>Load 
Older Messages</strong> and/or <strong>Load Newer Messages</strong> functions 
in ExtractFace to show older or newer messages around the searched one.</p>
<img src="DumpChatWindow.png" alt="DumpChatWindow" width="660" height="280" border="0">
<p>When you are ready, you can use the "Dump Chat" function. When you select 
it, ExtractFace:</p>
<ol>
<li>Displays the <strong>Dump Chat</strong> window (shown above)</li>
<li>Checks if you are in the <strong>messages</strong> page</li>
<li>If not, shows an error message</li>
<li>If yes, gathers the interlocutor's name to propose as filename</li>
</ol>
<p>If you select the <strong>Download attached document</strong> option, 
ExtractFace will try to gather attached files in messages like images, videos, 
or any other files included. If you don't select the option, it doesn't mean 
that the output HTML file will not contain images in, but these images won't be 
stored as local content. When the output HTML file is opened in Firefox, you 
can use "Save as" function to save the result. Firefox will then saved the 
images as local.</p>
<p>If you select the <strong>Download image in full size</strong> option, 
ExtractFace will try to download the full size version of images (images sent 
by the user), when it's possible. A link in the output HTML file will be added. 
Be aware that sometimes, the image in full size has the same filename so it 
will replace the smaller one in the output HTML file.</p>
<p>If you select the <strong>Download vocal messages</strong> option, ExtractFace 
will try to gather the vocal messages included in the conversation.</p>
<p>If you select the <strong>Hide me</strong> option, your details (profile 
icon, profile URL and profile Name) will be blacked out.</p>
<p><strong>Searched part only</strong> option must be checked if you did a 
search by using the <strong>Search messages in the conversation</strong> 
function provided by Facebook. Otherwise, the dumped chat will be the most recent 
messages that were displayed before you did the search.</p>
<p>The output HTML file should look like this:</p>
<img src="DumpChatSample.png" alt="DumpChatSample" width="836" height="480" border="0">
<p>Here are some explanations about some elements that can be found in a
Facebook conversation:</p>
<ul>
<li><strong style="text-decoration: underline;">Images sent by the user:</strong> 
The are a lot of ways to add this kind of files to a conversation, but ExtractFace 
should support them all. If not, contact the author.</li>
<li><strong style="text-decoration: underline;">Facebook images:</strong> Like 
emoticons, stickers or animated images. ExtractFace should support them all. If not, 
contact the author.</li>
<li><strong style="text-decoration: underline;">Videos:</strong> If you select the 
<strong>Download attached document</strong> option, ExtractFace will load the page 
of the video and gather the video image and the video file. A clickable image will 
be in the output HTML file. If you didn't select the option, a simple link to the 
video will be used.</li>
<li><strong style="text-decoration: underline;">Vocal messages:</strong> To download 
vocal messages, ExtractFace must open the mobile version of your profile. Then, it will 
search the chat, browse it all, find and download the vocal messages. When it produces 
the output HTML file, ExtractFace will insert links to vocal messages at the right place. 
If you didn't select the option, a name for the vocal messages will be proposed (based 
on the timestamp of the message).</li>
<li><strong style="text-decoration: underline;">GPS coordinates:</strong> When available, 
ExtractFace will gather GPS coordinates and will add a Google map link in the output HTML 
file;</li>
<li><strong style="text-decoration: underline;">Notifications:</strong> Ex.: "<em>You 
missed a call</em>", "<em>Seen</em>", "<em>Sent from Mobile</em>", etc. ExtractFace should 
support them all. If not, contact the author.</li>
</ul>
<p>Directories that could be created by ExtractFace (if needed):</p>
<ul>
<li><strong style="text-decoration: underline;">images_[page title]:</strong> For the 
image files</li>
<li><strong style="text-decoration: underline;">videos_[page title]:</strong> For the 
video files</li>
<li><strong style="text-decoration: underline;">pj_[page title]:</strong> For attached 
documents</li>
<li><strong style="text-decoration: underline;">vm_[page title]:</strong> For vocal 
messages</li>
</ul>

<h3>Dumping huge conversation</h3>
<p>If you have to dump a huge conversation (thousand of messages) and you can't display 
it all in Firefox because regular scrolling got stuck before reaching the beginning of the 
conversation. There is the solution:</p>
<ol>
<li>Use regular scrolling and dump the most recent messages;</li>
<li>Reload the page in Firefox (to free some memory space);</li>
<li>Until you reach the begining of the conversation:</li>
<ol>
<li>Use the <strong>Search messages in the conversation</strong> function in Facebook to 
search the older message displayed in the part you already dump;</li>
<li>Use the <strong>Load Older Messages</strong> function in ExtractFace. To prevent crash 
Firefox, you could set a limit of scrolling (See <a href="#Settings">Settings</a>);</li>
<li>Dump the displayed part by checking <strong>Searched part only</strong> option;</li>
<li>Reload the page in Firefox;</li>
</ol>
</ol>

<div style="margin: 0 0 0 0;"><a href="#DontForget">Top of the page</a></div>
<h2 style="margin-top:1.5em;"><a name="Settings">Settings</a></h2>
<p>There are a few parameters that can be set in ExtractFace.</p>
<h3>General options</h3>
<img src="SettingsWindow1.png" alt="SettingsWindow" width="660" height="290" border="0"><br><br>
<p>In <strong>Tool</strong> section, we have the following functions and options:</p>
<ul>
<li><strong>Export Lang.ini:</strong> Use this function to translate ExtractFace GUI. 
See <a href="./ExtractFace.html#Translation">Translation</a> for help about this 
functionality.</li>
<li><strong>Check Update:</strong> Check on <a href="https://le-tools.com" 
target="_blank">le-tools.com</a> if a tool update is available.</li>
<li><strong>Check for update at startup:</strong> When ExtractFace starts, check on 
website for available update of the tool.</li>
</ul>
<p>In <strong>Functions</strong> section, you have:</p>
<li><strong>Time for loading:</strong> Time to wait when a page (or new content) must 
be loaded in Firefox. Default value is <strong>2 seconds</strong>. As ExtractFace 
must often gather content from internet, it can be affected by network latency. When 
ExtractFace tries to access data in Firefox too fast, it may crash the process. ExtractFace 
has been designed to recover from crash like this, but it may slow down the whole process.  
If it happends too often, you can try to increase this value.</li>
<li><strong>Number of resumes:</strong> Number of times that ExtractFace will 
restart a crashed process before giving up. Default value is <strong>10</strong>.</li>
<li><strong>Delete temp files when finished:</strong> Applies to most of functions. When 
ExtractFace downloads page, it saves data in a temp directory. If this options is checked, 
the temp directory is deleted when function ends.</li>
<li><strong>Enable debug logging:</strong> If you check this option, a debug.log will 
be created in the program folder. Every crash error will be logged in the file. This 
could be useful for troubleshooting.</li>
</ul>
<h3>Scroll options</h3>
<img src="SettingsWindow2.png" alt="SettingsWindow2" width="660" height="290" border="0">
<ul>
<li><strong>Maximum scrolling (chat):</strong> When you use scroll chat functions, ExtractFace 
scrolls, waits for the additional content to display, scrolls again, and so on until it reaches 
the beginning or the end of the conversation. Unfortunately, it could get stuck if the number 
of messages is too important. This field can be used to set a limit. The value represent the 
number of times ExtractFace will scroll, not the number of messages displayed. Default value 
is 0 which means no limit.</li>
<li><strong>Maximum scrolling (other):</strong> Like the previous option, but it is 
asscoiated to the general <a href="ScrollExpand">Scroll</a> function. Default value 
is 0 (no limit).</li>
<li><strong>When page loaded, scroll back to top:</strong> When a page is fully loaded 
(after scrolling to the bottom), scroll back to top. Default is <strong>checked</strong>. 
You may uncheck this option if you want to easily see if scrolling fails to load all.</li>
</ul>
<h3>Expand options</h3>
<img src="SettingsWindow3.png" alt="SettingsWindow3" width="660" height="290" border="0">
<p>These options are related to the <a href="#GeneralFunctions">Expand</a> function and 
the combined <a href="#GeneralFunctions">Scroll and Expand</a> function. Every option 
allows to expand a particular type of content: additional text, comments or posts.</p>

<div style="margin: 0 0 0 0;"><a href="#DontForget">Top of the page</a></div>
<br>
<hr>

<p style="color:#000066; font-size: 100%; font-weight: bold;">ExtractFace<br>Copyright 
(c) 2015-2016 Alain Rioux</p>

</body>
</html>
